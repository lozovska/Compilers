% Лабораторная работа № 1.1. Раскрутка самоприменимого компилятора
% 25 февраля 2023 г.
% Лозовска Карина, ИУ9И-64Б

# Цель работы
Целью данной работы является ознакомление с раскруткой самоприменимых
компиляторов на примере модельного компилятора.

# Индивидуальный вариант
Варинат 36. Компилятор BeRo. Разрешить возможность не писать ключевое
слово then после условия в блоке `if`. 

# Реализация
Различие между файлами `btpc64macOS.pas` и `btpc64macOS2.pas`: Для
добавления возможности не писать ключевое слово then необходимо было
удалить или закомментировать строку 1419, в которой вызывается ошибка, если
в программе не встречается ключевое слово then после условия в блоке `if`.

```diff
btpc64macOS.pas 2021-01-16 16:19:36 +++ btpc64macOS2.pas 2023-02-20
23:21:00 @@ -1416,7 +1416,7 @@ GetSymbol; Expression(t); MustBe(TypeBOOL,t);
- Expect(SymTHEN); + {Expect(SymTHEN);} i:=CodeLabel; EmitOpcode(OPJZ,0);
Statement;
```

Различие между файлами `btpc64macOS2.pas` и `btpc64macOS3.pa`s: Так как
в `btpc64macOS2.pa`s было разрешено не писать ключевое слово `then` после
условия в блоке `if`, в `btpc64macOS3.pas` все вхождения ключевого слова `then` были
закомментированны.

```diff
btpc64macOS2.pas 2023-02-20 23:21:00 +++ btpc64macOS3.pas 2023-02-20
23:59:51 @@ 
-140,7 +140,7 @@ SymBEGIN=21; SymEND=22; SymIF=23; 
- SymTHEN=24; 
+ Sym{then}=24; 
SymELSE=25; 
SymWHILE=26; 
SymDO=27;
@@ 
-336,8 
+336,8 @@ 
SymIF:begin 
Write(‘ “if” expected’); 
end; 
- SymTHEN:begin 1
- Write(‘ “then” expected’); 
+ Sym{then}:begin 
+ Write(‘ “{then}” expected’);
end; 
SymELSE:begin 
Write(‘ “else” expected’);
... and so on ...
```

# Тестирование
Тестовый пример:
```pascal
program Hello;
begin
  if true begin
	WriteLn('Hello, student!');
	end;
end.
```
Вывод тестового примера на `stdout`
```
Hello, student!
```
# Вывод
Во время выполнения лабораторной работы был рассмотрен модельный
компилятор BeRo Tiny Pascal: 
– структура исходного кода; 
– использование компилятора на примере операционной системы macOS; 
– один шаг расткрутки компилятора.